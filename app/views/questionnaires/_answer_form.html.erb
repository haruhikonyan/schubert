<p><%= @questionnaire.title %></p>
<p><%= simple_format(@questionnaire.discription) %></p>


<%= form_for(questionnaire_answer, :url => {:action => :create_answer}) do |f| %>

  <% questionnaire.questionnaire_items.each do |item| %>
    <%= fields_for QuestionnaireItemAnswer.new(questionnaire_answer: questionnaire_answer) do |i| %>
      <%= i.label item.title %>

      <div class="field">
      <% if item.is_multiple %>
        <!--paramsに空欄が混ざるのはなぜだろう？-->
        <%= collection_check_boxes(:questionnaire_choices_options, :answer_choices_option_ids, item.questionnaire_choices_options, :id, :option_name) %> 
      <% elsif %>
        <%= collection_radio_buttons(:questionnaire_choices_options, :answer_choices_option_ids, item.questionnaire_choices_options, :id, :option_name) %> 
      <% end %>
      </div>
      <% if item.is_exist_free_text %>
        <div class="field">
          <%= i.text_area :free_text_answer, class: 'form-control' %>
        </div>
      <% end %>
    

    <% end %>
  <% end %>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>